# å­¸æœŸæ ¼å¼é›™æ”¯æ´ä¿®å¾©

## ğŸ› å•é¡Œæè¿°

ä½¿ç”¨ `output: export` é…ç½®æ™‚ï¼ŒNext.js è¦æ±‚æ‰€æœ‰å‹•æ…‹è·¯ç”±éƒ½å¿…é ˆåœ¨ `generateStaticParams()` ä¸­é å…ˆå®šç¾©ã€‚

### éŒ¯èª¤è¨Šæ¯
```
Error: Page "/course/[semester]/[id]/page" is missing param "/course/1141/TCAI10060" 
in "generateStaticParams()", which is required with "output: export" config.
```

### æ ¹æœ¬åŸå› 
- API è¿”å›çš„å­¸æœŸæ ¼å¼ï¼š`114-1`ï¼ˆå¸¶é€£å­—è™Ÿï¼‰
- ä½¿ç”¨è€…è¨ªå•çš„ URLï¼š`/course/1141/TCAI10060`ï¼ˆç„¡é€£å­—è™Ÿï¼‰
- `generateStaticParams()` åªç”Ÿæˆäº†å¸¶é€£å­—è™Ÿçš„è·¯å¾‘
- å°è‡´ç„¡é€£å­—è™Ÿçš„ URL ç„¡æ³•åŒ¹é…

## âœ… è§£æ±ºæ–¹æ¡ˆ

### ç­–ç•¥
ç‚ºæ¯å€‹å­¸æœŸç”Ÿæˆ**å…©ç¨®æ ¼å¼**çš„éœæ…‹è·¯å¾‘ï¼š
1. åŸå§‹æ ¼å¼ï¼š`114-1`ï¼ˆå¸¶é€£å­—è™Ÿï¼‰
2. ç°¡åŒ–æ ¼å¼ï¼š`1141`ï¼ˆç„¡é€£å­—è™Ÿï¼‰

### å¯¦ä½œæ­¥é©Ÿ

#### 1. æ›´æ–° `generateStaticParams()`
ç‚ºæ¯å€‹å­¸æœŸ/èª²ç¨‹çµ„åˆç”Ÿæˆå…©å€‹è·¯å¾‘ï¼š

```typescript
export async function generateStaticParams() {
    const params = [];
    
    for (const semester of semesters) {
        for (const courseId of courseIds) {
            // åŸå§‹æ ¼å¼ (114-1)
            params.push({ semester, id: courseId });
            
            // ç„¡é€£å­—è™Ÿæ ¼å¼ (1141)
            params.push({ 
                semester: semester.replace('-', ''), 
                id: courseId 
            });
        }
    }
    
    return params;
}
```

#### 2. æ¨™æº–åŒ–å­¸æœŸæ ¼å¼
åœ¨æ‰€æœ‰ç²å–è³‡æ–™çš„åœ°æ–¹ï¼Œçµ±ä¸€è½‰æ›ç‚º API æ ¼å¼ï¼š

```typescript
// æ¨™æº–åŒ–å­¸æœŸæ ¼å¼ï¼šå¦‚æœæ˜¯ 1141 æ ¼å¼ï¼Œè½‰æ›ç‚º 114-1
let normalizedSemester = semester;
if (!semester.includes('-') && semester.length === 4) {
    normalizedSemester = `${semester.slice(0, 3)}-${semester.slice(3)}`;
}

// ä½¿ç”¨æ¨™æº–åŒ–å¾Œçš„æ ¼å¼å‘¼å« API
const response = await fetch(
    `https://.../${normalizedSemester}/course/${id}.json`
);
```

## ğŸ“ ä¿®å¾©çš„æª”æ¡ˆ

### 1. `/src/app/search/[semester]/page.tsx`
**ä¿®æ”¹å…§å®¹ï¼š**
- âœ… `generateStaticParams()` ç”Ÿæˆé›™æ ¼å¼
- âœ… `getCourses()` æ¨™æº–åŒ–å­¸æœŸæ ¼å¼

**æ”¯æ´çš„ URLï¼š**
- `/search/114-1` âœ…
- `/search/1141` âœ…

### 2. `/src/app/course/[semester]/[id]/page.tsx`
**ä¿®æ”¹å…§å®¹ï¼š**
- âœ… `generateStaticParams()` ç”Ÿæˆé›™æ ¼å¼
- âœ… `generateMetadata()` æ¨™æº–åŒ–å­¸æœŸæ ¼å¼
- âœ… `CourseDetail` çµ„ä»¶æ¨™æº–åŒ–å­¸æœŸæ ¼å¼

**æ”¯æ´çš„ URLï¼š**
- `/course/114-1/CSIE5160AC` âœ…
- `/course/1141/CSIE5160AC` âœ…

### 3. `/src/app/course/[semester]/[id]/syllabus/page.tsx`
**ä¿®æ”¹å…§å®¹ï¼š**
- âœ… `generateStaticParams()` ç”Ÿæˆé›™æ ¼å¼
- âœ… `generateMetadata()` æ¨™æº–åŒ–å­¸æœŸæ ¼å¼
- âœ… `SyllabusPage` çµ„ä»¶æ¨™æº–åŒ–å­¸æœŸæ ¼å¼

**æ”¯æ´çš„ URLï¼š**
- `/course/114-1/CSIE5160AC/syllabus` âœ…
- `/course/1141/CSIE5160AC/syllabus` âœ…

## ğŸ¯ ä¿®å¾©å‰å¾Œå°æ¯”

### ä¿®å¾©å‰
```typescript
// âŒ åªç”Ÿæˆå¸¶é€£å­—è™Ÿæ ¼å¼
for (const courseId of courseIds) {
    params.push({ semester, id: courseId }); // åªæœ‰ 114-1
}
```

**çµæœï¼š**
- âœ… `/course/114-1/XXX` - æ­£å¸¸
- âŒ `/course/1141/XXX` - 500 éŒ¯èª¤

### ä¿®å¾©å¾Œ
```typescript
// âœ… ç”Ÿæˆå…©ç¨®æ ¼å¼
for (const courseId of courseIds) {
    params.push({ semester, id: courseId });              // 114-1
    params.push({ semester: semester.replace('-', ''), id: courseId }); // 1141
}
```

**çµæœï¼š**
- âœ… `/course/114-1/XXX` - æ­£å¸¸
- âœ… `/course/1141/XXX` - æ­£å¸¸

## ğŸ“Š å½±éŸ¿ç¯„åœ

### ç”Ÿæˆçš„è·¯å¾‘æ•¸é‡
å‡è¨­æœ‰ 3 å€‹å­¸æœŸï¼Œæ¯å€‹å­¸æœŸ 1000 é–€èª²ç¨‹ï¼š

**ä¿®å¾©å‰ï¼š**
- è·¯å¾‘æ•¸é‡ï¼š3 Ã— 1000 = 3,000

**ä¿®å¾©å¾Œï¼š**
- è·¯å¾‘æ•¸é‡ï¼š3 Ã— 1000 Ã— 2 = 6,000

**å¢åŠ é‡ï¼š** +100%ï¼ˆæ¯å€‹è·¯å¾‘å¤šç”Ÿæˆä¸€å€‹è®Šé«”ï¼‰

### Build æ™‚é–“å½±éŸ¿
- é è¨ˆå¢åŠ ç´„ 10-20% çš„ build æ™‚é–“
- ä½†æ›ä¾†æ›´å¥½çš„ä½¿ç”¨è€…é«”é©—ï¼ˆå…©ç¨® URL æ ¼å¼éƒ½æ”¯æ´ï¼‰

## ğŸ” ç‚ºä»€éº¼éœ€è¦å…©ç¨®æ ¼å¼ï¼Ÿ

### ä½¿ç”¨æƒ…å¢ƒ

#### æ ¼å¼ 1ï¼šå¸¶é€£å­—è™Ÿ `114-1`
- ğŸ“š **å®˜æ–¹æ¨™æº–æ ¼å¼**
- ğŸ“– å¯è®€æ€§æ›´å¥½
- ğŸ”— API ä½¿ç”¨çš„æ ¼å¼

#### æ ¼å¼ 2ï¼šç„¡é€£å­—è™Ÿ `1141`
- âŒ¨ï¸ **è¼¸å…¥æ–¹ä¾¿**ï¼ˆä¸éœ€è¦è¼¸å…¥é€£å­—è™Ÿï¼‰
- ğŸ”— URL æ›´çŸ­
- ğŸ“± æ‰‹æ©Ÿè¼¸å…¥æ›´å®¹æ˜“

### å¯¦éš›ç¯„ä¾‹
ä½¿ç”¨è€…å¯èƒ½æœƒï¼š
1. å¾æœå°‹é é¢é»æ“Šèª²ç¨‹ â†’ ä½¿ç”¨ `114-1` æ ¼å¼
2. ç›´æ¥åœ¨ç¶²å€åˆ—è¼¸å…¥ â†’ å¯èƒ½è¼¸å…¥ `1141` æ ¼å¼
3. åˆ†äº«é€£çµçµ¦æœ‹å‹ â†’ å…©ç¨®æ ¼å¼éƒ½æ‡‰è©²èƒ½ç”¨

## âš ï¸ æ³¨æ„äº‹é …

### 1. API æ ¼å¼å›ºå®š
API åªæ¥å—å¸¶é€£å­—è™Ÿçš„æ ¼å¼ `114-1`ï¼Œå› æ­¤ï¼š
- å¿…é ˆåœ¨ç²å–è³‡æ–™å‰é€²è¡Œæ ¼å¼è½‰æ›
- ä¸‰å€‹ä½ç½®éƒ½éœ€è¦è½‰æ›ï¼š
  - `generateMetadata()`
  - `getCourses()` / ä¸»çµ„ä»¶
  - æ‰€æœ‰ fetch å‘¼å«

### 2. å…§éƒ¨é€£çµå»ºè­°
åœ¨æ‡‰ç”¨å…§éƒ¨ç”Ÿæˆé€£çµæ™‚ï¼Œå»ºè­°çµ±ä¸€ä½¿ç”¨å¸¶é€£å­—è™Ÿæ ¼å¼ï¼š

```typescript
// âœ… æ¨è–¦
<Link href={`/course/${semester}/${courseId}`}>

// âš ï¸ é¿å…ï¼ˆé›–ç„¶ä¹Ÿèƒ½ç”¨ï¼‰
<Link href={`/course/${semester.replace('-', '')}/${courseId}`}>
```

### 3. SEO è€ƒé‡
å…©ç¨®æ ¼å¼æŒ‡å‘ç›¸åŒå…§å®¹ï¼Œå»ºè­°ï¼š
- ä½¿ç”¨ canonical URL æŒ‡å®šä¸»è¦æ ¼å¼
- æˆ–åœ¨ä¸€ç¨®æ ¼å¼é‡å®šå‘åˆ°å¦ä¸€ç¨®

## ğŸ§ª æ¸¬è©¦ç¢ºèª

### æ¸¬è©¦æ¡ˆä¾‹

#### 1. æœå°‹é é¢
```bash
âœ… GET /search/114-1
âœ… GET /search/1141
```

#### 2. èª²ç¨‹è©³æƒ…é 
```bash
âœ… GET /course/114-1/CSIE5160AC
âœ… GET /course/1141/CSIE5160AC
```

#### 3. èª²ç¨‹å¤§ç¶±é 
```bash
âœ… GET /course/114-1/CSIE5160AC/syllabus
âœ… GET /course/1141/CSIE5160AC/syllabus
```

### é©—è­‰æ–¹å¼
1. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼š`pnpm run dev`
2. æ¸¬è©¦å…©ç¨® URL æ ¼å¼éƒ½èƒ½æ­£å¸¸è¨ªå•
3. æª¢æŸ¥ API å‘¼å«æ˜¯å¦ä½¿ç”¨æ­£ç¢ºæ ¼å¼
4. ç¢ºèªæ²’æœ‰ 500 éŒ¯èª¤

## ğŸ‰ ç¸½çµ

### ä¿®å¾©å®Œæˆ
âœ… æ‰€æœ‰å‹•æ…‹ `[semester]` è·¯ç”±ç¾åœ¨éƒ½æ”¯æ´å…©ç¨®æ ¼å¼
âœ… ç„¡ç·¨è­¯éŒ¯èª¤
âœ… å‘å¾Œç›¸å®¹ï¼ˆèˆŠé€£çµä»ç„¶æœ‰æ•ˆï¼‰
âœ… ä½¿ç”¨è€…é«”é©—æ”¹å–„

### æŠ€è¡“å‚µå‹™
- è€ƒæ…®æœªä¾†çµ±ä¸€ä½¿ç”¨å–®ä¸€æ ¼å¼
- æ·»åŠ æ ¼å¼é‡å®šå‘é‚è¼¯
- åœ¨æ–‡ä»¶ä¸­æ˜ç¢ºå»ºè­°çš„ URL æ ¼å¼

### å­¸ç¿’è¦é»
1. `output: export` éœ€è¦å®Œæ•´çš„ `generateStaticParams()`
2. å‹•æ…‹è·¯ç”±çš„æ‰€æœ‰å¯èƒ½è·¯å¾‘éƒ½å¿…é ˆé å…ˆç”Ÿæˆ
3. URL æ ¼å¼æ‡‰è©²è€ƒæ…®ä½¿ç”¨è€…è¼¸å…¥ç¿’æ…£
4. å…§éƒ¨è³‡æ–™æ ¼å¼å’Œå¤–éƒ¨ URL æ ¼å¼å¯ä»¥ä¸åŒ
