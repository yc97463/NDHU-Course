# 課程列表分頁功能

## ✨ 新增功能

搜尋頁面現在支援分頁顯示課程列表，提升大量課程的瀏覽體驗！

## 🎯 主要特色

### 1. **智能分頁**
- 預設每頁顯示 20 門課程
- 可自訂每頁顯示數量：10 / 20 / 50 / 100
- 當課程數量少於每頁顯示數量時，自動隱藏分頁控制

### 2. **頁碼智能顯示**
根據總頁數和當前頁碼，智能顯示頁碼按鈕：

#### 總頁數 ≤ 7
```
[1] [2] [3] [4] [5] [6] [7]
```

#### 當前頁在前面（第1-4頁）
```
[1] [2] [3] [4] [5] ... [50]
```

#### 當前頁在中間
```
[1] ... [10] [11] [12] ... [50]
```

#### 當前頁在後面（倒數第4頁以內）
```
[1] ... [46] [47] [48] [49] [50]
```

### 3. **導航控制**
- **上一頁 / 下一頁按鈕**：快速翻頁
- **頁碼按鈕**：直接跳轉到指定頁
- **自動禁用**：首頁禁用「上一頁」，末頁禁用「下一頁」

### 4. **自動重置**
當篩選條件改變時，自動重置到第一頁：
- 修改搜尋關鍵字 → 重置到第 1 頁
- 改變學院篩選 → 重置到第 1 頁
- 改變學分篩選 → 重置到第 1 頁
- 改變時間段篩選 → 重置到第 1 頁

### 5. **即時統計**
```
找到 156 門課程 / 共 500 門 · 顯示第 41-60 門
```
清楚顯示：
- 符合條件的課程總數
- 課程資料庫總數
- 當前顯示的課程範圍

## 🎨 UI/UX 設計

### 分頁控制列
```
┌─────────────────────────────────────────────────┐
│  [← 上一頁]  [1] ... [5] [6] [7] ... [50]  [下一頁 →]  │
└─────────────────────────────────────────────────┘
```

### 視覺狀態
- **當前頁**：藍色背景 + 白色文字
- **其他頁**：白色背景 + 灰色邊框
- **禁用狀態**：淺灰背景 + 淺灰文字 + 禁用鼠標
- **懸停效果**：輕微放大動畫

### 每頁顯示數量選擇器
```
┌─────────────────────────────────┐
│ 每頁顯示：[20 ▼]               │
│           ├─ 10                │
│           ├─ 20 ✓              │
│           ├─ 50                │
│           └─ 100               │
└─────────────────────────────────┘
```

## 💻 技術實現

### 狀態管理
```typescript
const [currentPage, setCurrentPage] = useState(1);
const [itemsPerPage, setItemsPerPage] = useState(20);
```

### 分頁計算
```typescript
const totalPages = Math.ceil(filteredCourses.length / itemsPerPage);
const startIndex = (currentPage - 1) * itemsPerPage;
const endIndex = startIndex + itemsPerPage;
const paginatedCourses = filteredCourses.slice(startIndex, endIndex);
```

### 智能頁碼生成
```typescript
const getPageNumbers = () => {
    const pages: (number | string)[] = [];
    const maxVisible = 7;

    if (totalPages <= maxVisible) {
        // 顯示所有頁碼
        for (let i = 1; i <= totalPages; i++) {
            pages.push(i);
        }
    } else {
        // 智能顯示邏輯
        if (currentPage <= 4) {
            // 前面：[1] [2] [3] [4] [5] ... [50]
        } else if (currentPage >= totalPages - 3) {
            // 後面：[1] ... [46] [47] [48] [49] [50]
        } else {
            // 中間：[1] ... [10] [11] [12] ... [50]
        }
    }

    return pages;
};
```

### 自動重置邏輯
```typescript
useEffect(() => {
    setCurrentPage(1);
}, [searchQuery, selectedCollege, selectedCredits, selectedTimeSlots]);
```

## 📊 使用範例

### 範例 1：瀏覽大量課程
1. 搜尋「程式設計」，找到 85 門課程
2. 系統自動分成 5 頁（每頁 20 門）
3. 使用頁碼按鈕快速跳轉到感興趣的頁面

### 範例 2：調整顯示數量
1. 預設每頁顯示 20 門課程
2. 點擊「每頁顯示」下拉選單
3. 選擇「50」，一次查看更多課程
4. 選擇「10」，更專注地瀏覽每門課程

### 範例 3：篩選自動重置
1. 在第 3 頁瀏覽課程
2. 改變學院篩選條件
3. 系統自動跳轉到第 1 頁顯示新的篩選結果

## 🎯 性能優化

### 只渲染當前頁
```typescript
// 不渲染所有課程
{filteredCourses.map(...)}  ❌

// 只渲染當前頁的課程
{paginatedCourses.map(...)}  ✅
```

### 優點
- 減少 DOM 節點數量
- 提升初始渲染速度
- 降低記憶體使用
- 改善滾動性能

## 🔄 動畫效果

使用 Framer Motion 提供流暢的互動體驗：

```typescript
<motion.button
    whileHover={{ scale: isActive ? 1 : 1.05 }}
    whileTap={{ scale: 0.95 }}
    className={...}
>
    {pageNum}
</motion.button>
```

## 📱 響應式設計

- **桌面**：完整顯示所有分頁控制
- **平板**：智能縮減頁碼顯示
- **手機**：簡化為上/下頁按鈕 + 當前頁碼

## 🚀 未來改進

- [ ] 支援鍵盤導航（左/右箭頭鍵翻頁）
- [ ] 添加「跳轉到頁」輸入框
- [ ] 記住使用者的每頁顯示偏好（localStorage）
- [ ] 在 URL 中保存頁碼（支援分享和刷新）
- [ ] 添加「回到頂部」按鈕
- [ ] 虛擬滾動（無限滾動模式）

## 📝 使用說明

### 切換頁面
1. 點擊頁碼數字直接跳轉
2. 點擊「上一頁」或「下一頁」按鈕翻頁
3. 當前頁以藍色高亮顯示

### 調整每頁數量
1. 在右上角找到「每頁顯示」下拉選單
2. 選擇想要的數量（10/20/50/100）
3. 自動重新分頁並跳轉到第 1 頁

### 注意事項
- 改變任何篩選條件會自動回到第 1 頁
- 少於每頁顯示數量時不會顯示分頁控制
- 禁用的按鈕無法點擊（灰色顯示）
