(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{760:(e,t,r)=>{"use strict";r.d(t,{N:()=>f});var s=r(5155),l=r(2115),i=r(869),a=r(2885),n=r(7494),o=r(845),c=r(1508);class d extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=e instanceof HTMLElement&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:r,anchorX:i}=e,a=(0,l.useId)(),n=(0,l.useRef)(null),o=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,l.useContext)(c.Q);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:l,right:c}=o.current;if(r||!n.current||!e||!t)return;n.current.dataset.motionPopId=a;let d=document.createElement("style");return u&&(d.nonce=u),document.head.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===i?"left: ".concat(l):"right: ".concat(c),"px !important;\n            top: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(d)}},[r]),(0,s.jsx)(d,{isPresent:r,childRef:n,sizeRef:o,children:l.cloneElement(t,{ref:n})})}let h=e=>{let{children:t,initial:r,isPresent:i,onExitComplete:n,custom:c,presenceAffectsLayout:d,mode:h,anchorX:x}=e,p=(0,a.M)(m),g=(0,l.useId)(),f=(0,l.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;n&&n()},[p,n]),y=(0,l.useMemo)(()=>({id:g,initial:r,isPresent:i,custom:c,onExitComplete:f,register:e=>(p.set(e,!1),()=>p.delete(e))}),d?[Math.random(),f]:[i,f]);return(0,l.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[i]),l.useEffect(()=>{i||p.size||!n||n()},[i]),"popLayout"===h&&(t=(0,s.jsx)(u,{isPresent:i,anchorX:x,children:t})),(0,s.jsx)(o.t.Provider,{value:y,children:t})};function m(){return new Map}var x=r(2082);let p=e=>e.key||"";function g(e){let t=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&t.push(e)}),t}let f=e=>{let{children:t,custom:r,initial:o=!0,onExitComplete:c,presenceAffectsLayout:d=!0,mode:u="sync",propagate:m=!1,anchorX:f="left"}=e,[y,b]=(0,x.xQ)(m),j=(0,l.useMemo)(()=>g(t),[t]),v=m&&!y?[]:j.map(p),N=(0,l.useRef)(!0),k=(0,l.useRef)(j),w=(0,a.M)(()=>new Map),[S,C]=(0,l.useState)(j),[A,M]=(0,l.useState)(j);(0,n.E)(()=>{N.current=!1,k.current=j;for(let e=0;e<A.length;e++){let t=p(A[e]);v.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[A,v.length,v.join("-")]);let E=[];if(j!==S){let e=[...j];for(let t=0;t<A.length;t++){let r=A[t],s=p(r);v.includes(s)||(e.splice(t,0,r),E.push(r))}return"wait"===u&&E.length&&(e=E),M(g(e)),C(j),null}let{forceRender:P}=(0,l.useContext)(i.L);return(0,s.jsx)(s.Fragment,{children:A.map(e=>{let t=p(e),l=(!m||!!y)&&(j===A||v.includes(t));return(0,s.jsx)(h,{isPresent:l,initial:(!N.current||!!o)&&void 0,custom:r,presenceAffectsLayout:d,mode:u,onExitComplete:l?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==P||P(),M(k.current),m&&(null==b||b()),c&&c())},anchorX:f,children:e},t)})})}},1482:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},2355:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2954:(e,t,r)=>{Promise.resolve().then(r.bind(r,8965))},3052:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4186:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4416:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4516:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5040:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},5196:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},7287:(e,t,r)=>{"use strict";r.d(t,{P:()=>l});let s="ndhu-course-schedule";class l{static getScheduleData(){try{let e=localStorage.getItem(s);if(!e)return{};let t=JSON.parse(e);if("object"!=typeof t||null===t)return console.error("Invalid schedule data format"),{};return t}catch(e){return console.error("Error reading schedule data:",e),{}}}static saveScheduleData(e){try{if("object"!=typeof e||null===e)return void console.error("Invalid schedule data format");localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Error saving schedule data:",e)}}static getSemesterCourses(e){let t=this.getScheduleData()[e]||[];return Array.isArray(t)?t:(console.error("Invalid courses data format"),[])}static addCourse(e,t){if(!e||!t||!t.course_id)return console.error("Invalid course data"),!1;let r=this.getScheduleData();return r[e]||(r[e]=[]),!(r[e].some(e=>e.course_id===t.course_id)||this.checkTimeConflict(e,t))&&(r[e].push(t),this.saveScheduleData(r),!0)}static removeCourse(e,t){if(!e||!t)return void console.error("Invalid semester or courseId");let r=this.getScheduleData();r[e]&&(r[e]=r[e].filter(e=>e.course_id!==t),this.saveScheduleData(r))}static isCourseInSchedule(e,t){return!!e&&!!t&&this.getSemesterCourses(e).some(e=>e.course_id===t)}static checkTimeConflict(e,t){if(!e||!t||!t.class_time)return!1;for(let r of this.getSemesterCourses(e))if(r.class_time){for(let e of t.class_time)if(e&&e.day&&e.period){for(let t of r.class_time)if(t&&t.day&&t.period&&e.day===t.day&&String(e.period)===String(t.period))return!0}}return!1}static getAvailableSemesters(){let e=this.getScheduleData();return Object.keys(e).filter(t=>{let r=e[t];return Array.isArray(r)&&r.length>0})}static clearSemester(e){if(!e)return;let t=this.getScheduleData();delete t[e],this.saveScheduleData(t)}static clearAll(){localStorage.removeItem(s)}}},7580:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7924:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8965:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var s=r(5155),l=r(2115),i=r(5695),a=r(7924),n=r(4416),o=r(1482),c=r(2355),d=r(3052),u=r(7580),h=r(5040),m=r(4516),x=r(4186),p=r(760),g=r(9932),f=r(6874),y=r.n(f),b=r(7287),j=r(5196);let v=[{period:1,time:"06:10~07:00"},{period:2,time:"07:10~08:00"},{period:3,time:"08:10~09:00"},{period:4,time:"09:10~10:00"},{period:5,time:"10:10~11:00"},{period:6,time:"11:10~12:00"},{period:7,time:"12:10~13:00"},{period:8,time:"13:10~14:00"},{period:9,time:"14:10~15:00"},{period:10,time:"15:10~16:00"},{period:11,time:"16:10~17:00"},{period:12,time:"17:10~18:00"},{period:13,time:"18:10~19:00"},{period:14,time:"19:10~20:00"},{period:15,time:"20:10~21:00"},{period:16,time:"21:10~22:00"}],N=[{key:"一",name:"週一"},{key:"二",name:"週二"},{key:"三",name:"週三"},{key:"四",name:"週四"},{key:"五",name:"週五"},{key:"六",name:"週六"},{key:"日",name:"週日"}];function k(e){let{selectedSlots:t,onSlotsChange:r}=e,[i,a]=(0,l.useState)(!1),[o,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0),h=(0,l.useRef)([]),m=(0,l.useRef)(null),p=(0,l.useRef)(!1),f=(e,r)=>t.some(t=>t.day===e&&t.period===r),y=e=>N.findIndex(t=>t.key===e),b=(e,t)=>{let r=y(e.day),s=y(t.day),l=Math.min(r,s),i=Math.max(r,s),a=Math.min(e.period,t.period),n=Math.max(e.period,t.period),o=[];for(let e=l;e<=i;e++)for(let t=a;t<=n;t++)o.push({day:N[e].key,period:t});return o},k=e=>{if(!o)return;let t=h.current,s=b(o,e),l=e=>"".concat(e.day,"-").concat(e.period),i=new Set(s.map(l));if(d){let e=new Map;t.forEach(t=>e.set(l(t),t)),s.forEach(t=>e.set(l(t),t)),r(Array.from(e.values()).sort((e,t)=>{let r=y(e.day)-y(t.day);return 0!==r?r:e.period-t.period}))}else r(t.filter(e=>!i.has(l(e))))},w=(e,r)=>{a(!0);let s={day:e,period:r};c(s),m.current=s,p.current=!1,u(!f(e,r)),h.current=t},S=(e,t)=>{if(!i||!o)return;let r={day:e,period:t};m.current=r,(r.day!==o.day||r.period!==o.period)&&(p.current=!0),k(r)},C=()=>{if(i&&o&&!p.current){let{day:e,period:s}=o;f(e,s)?r(t.filter(t=>t.day!==e||t.period!==s)):r([...t,{day:e,period:s}])}a(!1),c(null),m.current=null,p.current=!1},A=e=>{let s=v.map(t=>({day:e,period:t.period}));if(s.every(e=>f(e.day,e.period)))r(t.filter(t=>t.day!==e));else{let e=[...t];s.forEach(t=>{f(t.day,t.period)||e.push(t)}),r(e)}},M=e=>{let s=N.map(t=>({day:t.key,period:e}));if(s.every(e=>f(e.day,e.period)))r(t.filter(t=>t.period!==e));else{let e=[...t];s.forEach(t=>{f(t.day,t.period)||e.push(t)}),r(e)}};return(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",onMouseUp:C,onMouseLeave:C,children:[(0,s.jsx)("div",{className:"bg-indigo-50 px-4 py-3 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(x.A,{className:"w-5 h-5 text-indigo-600"}),(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"選擇可用時間段"}),t.length>0&&(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-indigo-100 text-indigo-700",children:["已選 ",t.length," 個時段"]})]}),t.length>0&&(0,s.jsxs)("button",{onClick:()=>{r([])},className:"text-xs text-red-600 hover:text-red-700 font-medium transition-colors flex items-center space-x-1 cursor-pointer",children:[(0,s.jsx)(n.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"清除"})]})]})}),(0,s.jsx)("div",{className:"px-4 py-2 bg-blue-50 border-b border-blue-100",children:(0,s.jsx)("p",{className:"text-xs text-blue-700",children:"\uD83D\uDCA1 點擊或拖曳選擇時間段，點擊週次/時段標題可快速選擇整列/整欄"})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse select-none",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50",children:[(0,s.jsx)("th",{className:"border border-gray-200 px-2 py-2 text-xs font-semibold text-gray-700 w-20",children:"時段"}),N.map(e=>(0,s.jsx)("th",{className:"border border-gray-200 px-2 py-2 text-xs font-semibold text-gray-700 min-w-[80px] cursor-pointer hover:bg-indigo-50 transition-colors group",onClick:()=>A(e.key),children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,s.jsx)("span",{children:e.name}),v.every(t=>f(e.key,t.period))&&(0,s.jsx)(j.A,{className:"w-3 h-3 text-indigo-600"})]})},e.key))]})}),(0,s.jsx)("tbody",{children:v.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50/50",children:[(0,s.jsx)("td",{className:"border border-gray-200 px-2 py-1 bg-gray-50 text-center cursor-pointer hover:bg-indigo-50 transition-colors group",onClick:()=>M(e.period),children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-xs",children:e.period}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500 leading-tight",children:e.time})]}),N.every(t=>f(t.key,e.period))&&(0,s.jsx)(j.A,{className:"w-3 h-3 text-indigo-600"})]})}),N.map(t=>{let r=f(t.key,e.period);return(0,s.jsx)("td",{className:"border border-gray-200 p-1 text-center cursor-cell transition-all duration-150 ".concat(r?"bg-indigo-500 hover:bg-indigo-600":"bg-white hover:bg-indigo-50"),onMouseDown:()=>w(t.key,e.period),onMouseEnter:()=>S(t.key,e.period),style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},children:(0,s.jsx)(g.P.div,{className:"w-full h-8 flex items-center justify-center rounded",animate:{scale:r?1:.95},transition:{duration:.1},children:r&&(0,s.jsx)(g.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:(0,s.jsx)(j.A,{className:"w-4 h-4 text-white"})})})},t.key)})]},e.period))})]})}),(0,s.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,s.jsx)("div",{className:"text-xs text-gray-600",children:"快速選擇："}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>{let e=[];N.forEach(t=>{for(let r=3;r<=6;r++)e.push({day:t.key,period:r})}),r(e)},className:"px-3 py-1 text-xs font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors cursor-pointer",children:"上午 (3-6節)"}),(0,s.jsx)("button",{onClick:()=>{let e=[];N.forEach(t=>{for(let r=8;r<=11;r++)e.push({day:t.key,period:r})}),r(e)},className:"px-3 py-1 text-xs font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors cursor-pointer",children:"下午 (8-11節)"}),(0,s.jsx)("button",{onClick:()=>{let e=[];N.forEach(t=>{for(let r=13;r<=16;r++)e.push({day:t.key,period:r})}),r(e)},className:"px-3 py-1 text-xs font-medium bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors cursor-pointer",children:"晚上 (13-16節)"})]})]})})]})}function w(e){let{courses:t,semester:r}=e,u=(0,i.useRouter)(),h=(0,i.usePathname)(),m=(0,i.useSearchParams)(),[x,f]=(0,l.useState)(""),[y,b]=(0,l.useState)("all"),[j,v]=(0,l.useState)("all"),[N,w]=(0,l.useState)([]),[C,A]=(0,l.useState)(!1),M=(0,l.useRef)(!1),E=(0,l.useRef)(!1),P=(0,l.useRef)(!1),R=(0,l.useRef)(null),_=(0,l.useRef)(null),[I,D]=(0,l.useState)(1),[L,z]=(0,l.useState)(20),F=(0,l.useMemo)(()=>{let e=new Set;return t.forEach(t=>{if(t.college){let r=t.college.split("::")[0];e.add(r)}}),["all",...Array.from(e).sort()]},[t]),q=(0,l.useMemo)(()=>{let e=new Set;return t.forEach(t=>{if(t.credits){let r=t.credits.split("/")[0];e.add(r)}}),["all",...Array.from(e).sort((e,t)=>parseFloat(e)-parseFloat(t))]},[t]),U=(0,l.useMemo)(()=>({一:1,二:2,三:3,四:4,五:5,六:6,日:7}),[]),H=(0,l.useCallback)(e=>[...e].sort((e,t)=>U[e.day]-U[t.day]||e.period-t.period).map(e=>"".concat(e.day).concat(e.period)).join(","),[U]),O=(0,l.useCallback)(e=>{if(!e)return[];let t=e.split(",").filter(Boolean),r=[];for(let e of t){let t=e.charAt(0),s=parseInt(e.slice(1),10);U[t]&&Number.isFinite(s)&&r.push({day:t,period:s})}return r},[U]),T=(0,l.useCallback)((e,t)=>H(e)===H(t),[H]),B=(0,l.useMemo)(()=>{let e=t;if(x.trim()){let t=x.toLowerCase().trim();e=e.filter(e=>[e.id,e.name,e.teacher,e.offering_department,e.college].filter(Boolean).join(" ").toLowerCase().includes(t))}return"all"!==y&&(e=e.filter(e=>!!e.college&&e.college.split("::")[0]===y)),"all"!==j&&(e=e.filter(e=>!!e.credits&&e.credits.split("/")[0]===j)),N.length>0&&(e=e.filter(e=>!!e.class_time&&0!==e.class_time.length&&e.class_time.every(e=>N.some(t=>t.day===e.day&&t.period===parseInt(e.period))))),e},[t,x,y,j,N]),Q=(0,l.useCallback)(()=>{f(""),b("all"),v("all"),w([]),D(1)},[]),W=""!==x.trim()||"all"!==y||"all"!==j||N.length>0,X=(0,l.useRef)({searchQuery:x,selectedCollege:y,selectedCredits:j,timeSlotsLength:N.length});(0,l.useEffect)(()=>{let e=X.current;(e.searchQuery!==x||e.selectedCollege!==y||e.selectedCredits!==j||e.timeSlotsLength!==N.length)&&(D(1),X.current={searchQuery:x,selectedCollege:y,selectedCredits:j,timeSlotsLength:N.length})},[x,y,j,N.length]),(0,l.useEffect)(()=>{var e,t,r,s,l,i;P.current=!0;let a=null!=(e=m.get("q"))?e:"",n=null!=(t=m.get("college"))?t:"all",o=null!=(r=m.get("credits"))?r:"all",c=O(null!=(s=m.get("ts"))?s:""),d=parseInt(null!=(l=m.get("page"))?l:"1",10),u=parseInt(null!=(i=m.get("size"))?i:"20",10);a!==x&&f(a),n!==y&&b(n),o!==j&&v(o),T(c,N)||w(c),Number.isFinite(d)&&d>0&&d!==I&&D(d),Number.isFinite(u)&&u>0&&u!==L&&z(u),(a&&a.length>0||"all"!==n||"all"!==o||c.length>0)&&!M.current&&(A(!0),M.current=!0),_.current=m.toString()},[m]),(0,l.useEffect)(()=>{var e;if(E.current&&!P.current)return;let t=new URLSearchParams,r=x.trim();r&&t.set("q",r),"all"!==y&&t.set("college",y),"all"!==j&&t.set("credits",j),N.length>0&&t.set("ts",H(N)),I>1&&t.set("page",String(I)),20!==L&&t.set("size",String(L)),t.toString()===(null!=(e=_.current)?e:m.toString())&&(E.current=!0,P.current=!1)},[x,y,j,N,I,L,H]),(0,l.useEffect)(()=>{var e;if(P.current||!E.current)return;let t=new URLSearchParams,r=x.trim();r&&t.set("q",r),"all"!==y&&t.set("college",y),"all"!==j&&t.set("credits",j),N.length>0&&t.set("ts",H(N)),I>1&&t.set("page",String(I)),20!==L&&t.set("size",String(L));let s=t.toString();if(s!==(null!=(e=_.current)?e:m.toString())){let e=s?"".concat(h,"?").concat(s):h;_.current=s,u.replace(e,{scroll:!1})}},[x,y,j,N,I,L,h]),(0,l.useEffect)(()=>{let e=R.current;return()=>{e&&clearTimeout(e)}},[]);let J=Math.ceil(B.length/L),V=(I-1)*L,G=V+L,K=B.slice(V,G);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,s.jsx)(a.A,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>f(e.target.value),placeholder:"搜尋課程名稱、課程代碼、教師姓名...",className:"block w-full pl-11 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),x&&(0,s.jsx)("button",{onClick:()=>f(""),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600",children:(0,s.jsx)(n.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("button",{onClick:()=>A(!C),className:"inline-flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all cursor-pointer ".concat(C||W?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"篩選條件"}),W&&(0,s.jsx)("span",{className:"inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-indigo-600 rounded-full",children:+("all"!==y)+ +("all"!==j)+ +(N.length>0)})]}),W&&(0,s.jsx)("button",{onClick:Q,className:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors cursor-pointer",children:"清除所有篩選"})]}),(0,s.jsx)(p.N,{children:C&&(0,s.jsx)(g.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"學院"}),(0,s.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"全部學院"}),F.filter(e=>"all"!==e).map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"學分"}),(0,s.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"all",children:"全部學分"}),q.filter(e=>"all"!==e).map(e=>(0,s.jsxs)("option",{value:e,children:[e," 學分"]},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["可用時間段",N.length>0&&(0,s.jsxs)("span",{className:"ml-2 text-xs text-indigo-600",children:["(已選擇 ",N.length," 個時段)"]})]}),(0,s.jsx)(k,{selectedSlots:N,onSlotsChange:w})]})]})})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["找到 ",(0,s.jsx)("span",{className:"font-medium text-indigo-600",children:B.length})," 門課程",B.length!==t.length&&(0,s.jsxs)("span",{className:"text-gray-500",children:[" / 共 ",t.length," 門"]}),B.length>0&&(0,s.jsxs)("span",{className:"text-gray-500",children:[" ","\xb7 顯示第 ",V+1,"-",Math.min(G,B.length)," 門"]})]}),B.length>0&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{htmlFor:"itemsPerPage",className:"text-sm text-gray-600",children:"每頁顯示："}),(0,s.jsxs)("select",{id:"itemsPerPage",value:L,onChange:e=>{z(Number(e.target.value)),D(1)},className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:10,children:"10"}),(0,s.jsx)("option",{value:20,children:"20"}),(0,s.jsx)("option",{value:50,children:"50"}),(0,s.jsx)("option",{value:100,children:"100"})]})]})]}),B.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:K.map((e,t)=>(0,s.jsx)(S,{course:e,semester:r,index:t},e.id))}),J>1&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[(0,s.jsxs)("button",{onClick:()=>D(e=>Math.max(1,e-1)),disabled:1===I,className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all ".concat(1===I?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-1"}),"上一頁"]}),(0,s.jsx)("div",{className:"flex items-center space-x-1",children:(()=>{let e=[];if(J<=7)for(let t=1;t<=J;t++)e.push(t);else if(I<=4){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(J)}else if(I>=J-3){e.push(1),e.push("...");for(let t=J-4;t<=J;t++)e.push(t)}else{e.push(1),e.push("...");for(let t=I-1;t<=I+1;t++)e.push(t);e.push("..."),e.push(J)}return e})().map((e,t)=>{if("..."===e)return(0,s.jsx)("span",{className:"px-3 py-2 text-gray-400",children:"..."},"ellipsis-".concat(t));let r=e===I;return(0,s.jsx)(g.P.button,{onClick:()=>D(e),whileHover:{scale:r?1:1.05},whileTap:{scale:.95},className:"min-w-[40px] px-3 py-2 rounded-lg text-sm font-medium transition-all ".concat(r?"bg-indigo-600 text-white shadow-sm":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:e},e)})}),(0,s.jsxs)("button",{onClick:()=>D(e=>Math.min(J,e+1)),disabled:I===J,className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all ".concat(I===J?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:["下一頁",(0,s.jsx)(d.A,{className:"w-4 h-4 ml-1"})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl border border-gray-200",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(a.A,{className:"w-8 h-8 text-gray-400"})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"沒有找到符合的課程"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:W?"請嘗試調整搜尋條件或篩選條件":"請輸入關鍵字開始搜尋"}),W&&(0,s.jsx)("button",{onClick:Q,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors cursor-pointer",children:"清除所有篩選"})]})]})}function S(e){let{course:t,semester:r,index:i}=e,[a,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{n(b.P.isCourseInSchedule(r,t.id))},[r,t.id]),(0,s.jsx)(g.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.03*i,duration:.3},children:(0,s.jsx)(y(),{href:"/course/".concat(r,"/").concat(t.id),target:"_blank",children:(0,s.jsx)(g.P.div,{className:"group bg-white border border-gray-200 rounded-xl p-6 hover:border-indigo-300 hover:shadow-md transition-all duration-200 cursor-pointer",whileHover:{scale:1.01},children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-600 rounded-full"}),(0,s.jsx)("span",{className:"text-sm font-medium text-indigo-600 uppercase tracking-wide",children:t.id})]}),a&&(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-700",children:"已加入課表"})]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-indigo-700 transition-colors mb-3",children:t.name}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[t.teacher&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,s.jsx)(u.A,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:["教師：",t.teacher.replace(/\//g,"").trim()]})]}),t.credits&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:["學分：",t.credits.split("/")[0]]})]}),t.classroom&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,s.jsx)(m.A,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:["教室：",t.classroom]})]}),t.class_time&&t.class_time.length>0&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,s.jsx)(x.A,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsxs)("span",{children:["時間：",t.class_time.map(e=>"週".concat(e.day," 第").concat(e.period,"節")).join(", ")]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[t.college&&(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-gray-100 text-gray-700",children:t.college.split("::")[0]}),t.offering_department&&(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-md text-xs font-medium bg-blue-100 text-blue-700",children:t.offering_department.split("::")[0]})]})]}),(0,s.jsx)(g.P.div,{className:"flex-shrink-0 ml-4 opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{x:4},children:(0,s.jsx)("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-indigo-600 text-lg",children:"→"})})})]})})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[341,874,441,684,358],()=>t(2954)),_N_E=e.O()}]);